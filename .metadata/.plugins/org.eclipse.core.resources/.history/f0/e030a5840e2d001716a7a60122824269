package Data;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.nio.file.Path;
import java.nio.file.Paths;

public class Extraction 
{
	private static final String TESTFILE = new File("res/test/testInput.txt").getAbsolutePath() ;

	private static final File DIRECTORIOREPO = new File ("res/repo/manual/");

	private static BufferedReader br ;

	public Extraction(File test)
	{

	}

	//Add File Test to parameters
	public static void LeerArchivo( )
	{
		try {
			br = new BufferedReader(new FileReader(TESTFILE));
			String linea =  br.readLine();
			while(linea!=null)
			{
				if(linea.contains("msgid"))
				{

					System.out.println(linea);
				}
				else if(linea.contains("msgstr"))
				{
					System.out.println(linea);
				}
				linea = br.readLine();
			}
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}


	//Reads all Spanish Files from all directories
	public static void LeerArchivos()
	{
		File[] listFiles = DIRECTORIOREPO.listFiles();
		int tamArchivos =  listFiles.length;
		int count =0 ;
		System.out.println(tamArchivos);
		//have to skip first file (.ds_store)
		for (int i = 1; i <tamArchivos; i++) {


			File index = listFiles[i];
			//System.out.println(index);
			if(index.isDirectory())
			{
				int  tamSubArchivos = index.listFiles().length;

				//Test if size is the same
				//Test Archivos = 1351 (toca -1 por el primero y -1 por el otro .config);
				//Test cosos de Esp = 1349 

				for(int j = 0; j< tamSubArchivos;j++)
				{
					File index2 = index.listFiles()[j];
					if(index2.getName().equalsIgnoreCase("es.po"))
					{
						//LeerArchivo(index2);
						count++;
						//System.out.println(index2.getName());
					}
				}
			}
		}
		System.out.println(count);
	}

	public static void main (String[] args)
	{
		String test ="msgid \"\"";
		String test2 ="msgid \"Animation Layers\"" ;
		 auxSplitEng(test2);
		//System.out.println(test);
	}

	private static String auxSplitEsp(String linea)
	{
		String temp = linea.replace("msgstr ", "");
		System.out.println(temp);
		return temp;
	}
	
	private static void auxSplitEng(String linea)
	{
		String lang = "";
		if(linea.contains("msgid"))
		{
			lang = "msgid ";
		}
		else if(linea.contains("msgstr"))
		{
			lang = "msgstr ";
		}
		String temp = linea.replace("msgid ", "");
		if(temp.length()>2)
		{
			System.out.println("Es mayor a 2 "+ temp);
			extractMsg(temp);
			
		}
		else
		{
			System.out.println("No es mayor a 2 " + temp);
		}
	}
	
	private static void extractMsg(String linea)
	{
		int tam = linea.length();  
		int indexL = tam-1;
		linea = linea.substring(1, indexL);
		System.out.println(linea);
	}
	
}


